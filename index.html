<!doctype html>
<html>
   <head>
      <meta charset="UTF-8" />
      <title>Canvas Test</title>
   </head>
   <body>
      <section>
         <div>
            <canvas id="canvas">
               This text is displayed if your browser does not support HTML5 Canvas.
            </canvas>
         </div>
         <script type="text/javascript">

            var ctx;
            var pixel = 20;
            var WIDTH = pixel*30;
            var HEIGHT = pixel*20;
            var x = WIDTH/2;
            var y = HEIGHT/2;

            function block(x,y,w,h) {
              ctx.beginPath();
              ctx.rect(x,y,w,h);
              ctx.closePath();
              ctx.fill();
              ctx.stroke();
            }
            
            function arena(x,y,w,h) {
              ctx.beginPath();
              ctx.rect(x,y,w,h);
              ctx.closePath();
              ctx.fill();
              ctx.stroke();
            }
            
            function clear() {
              ctx.clearRect(0, 0, WIDTH, HEIGHT);
            }
            
            function init() {
              var canvas = document.getElementById("canvas");
              ctx = canvas.getContext("2d");
              canvas.width  = pixel*30;
              canvas.height = pixel*20;
              return setInterval(draw, 10);
            }
            
            function doKeyDown(evt){
            switch (evt.keyCode) {
              case 38:  /* Up arrow was pressed */
                if (y - pixel >= 0){
                  y -= pixel;
                }
                break;
              case 40:  /* Down arrow was pressed */
                if (y + pixel < HEIGHT){
                  y += pixel;
                }
                break;
              case 37:  /* Left arrow was pressed */
                if (x - pixel >= 0){
                  x -= pixel;
                }            
                break;  
              case 39:  /* Right arrow was pressed */
                if (x + pixel < WIDTH){
                  x += pixel;
                }
              }
            }
            
            function draw() {
              clear();
              ctx.fillStyle = "white";
              ctx.strokeStyle = "black";
              arena(0,0,WIDTH,HEIGHT);
              ctx.fillStyle = "purple";
              block(x, y, pixel, pixel);
            }
            
            init();
            window.addEventListener('keydown', doKeyDown, true);
         </script>
      </section>
   </body>
</html>